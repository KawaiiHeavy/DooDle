<p>Название теста: {{ this.test.title }}</p>
<p>Создатель: {{ this.test.creator.nickname }}</p>
<p><strong>Время:</strong> {{ this.getTime() }}</p>


<ng-container *ngIf="!this.testHasSent; else isResult">
    <div *ngFor="let question of this.test.questions">
        <strong>Вопрос:</strong> {{ question.questionText }}
        <div class="col s12 l4 center">
            <img class="responsive-img h200"
            *ngIf="question.image" 
            [src]="question.image"/>
        </div>
        <ul>
            <div *ngFor="let answer of question.userAnswers">
                <input type="checkbox" [(ngModel)]="answer.correct"/>
                {{ answer.answerText }}
            </div>
        </ul>
    </div>
</ng-container>


<ng-template #isResult>
    <div *ngFor="let question of this.test.questions">
        <strong>Вопрос:</strong> {{ question.questionText }}

        <div class="col s12 l4 center">
            <img class="responsive-img h200"
            *ngIf="question.image" 
            [src]="question.image"/>
        </div>
        <ul>
            <div *ngFor="let answer of question.answers; let i = index">
                <input type="checkbox" [disabled]="true" [(ngModel)]="answer.correct"/>
                {{ answer.answerText }}
                <span class="correctSpan" *ngIf="answer.correct == question.userAnswers[i].correct">Правильно</span>
                <span class="incorrectSpan" *ngIf="answer.correct != question.userAnswers[i].correct">Неправильно</span>
            </div>
        </ul>
    </div>
</ng-template>

<button mat-raised-button color="primary" (click)="checkTest(test)" [disabled]="this.getTime() == 0 || this.result">Отправить на проверку</button>
<div *ngIf="this.result">
    ID результата: {{ this.result.id }}<br>
    Результат: {{ this.result.score }} / {{ this.test.maxBall }}
</div>